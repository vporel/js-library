/*! For license information please see index.js.LICENSE.txt */
(()=>{var t={5:function(t){t.exports=function(){"use strict";function t(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,o)}return i}function e(e){for(var i=1;i<arguments.length;i++){var n=null!=arguments[i]?arguments[i]:{};i%2?t(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,s(o.key),o)}}function o(t,e,i){return(e=s(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function n(){return n=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(t[o]=i[o])}return t},n.apply(this,arguments)}function s(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var o=i.call(t,e||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}var a={exports:{}};!function(t){"undefined"!=typeof window&&function(e){var i=e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype,o=e.Blob&&function(){try{return Boolean(new Blob)}catch(t){return!1}}(),n=o&&e.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(t){return!1}}(),s=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||e.MSBlobBuilder,a=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,r=(o||s)&&e.atob&&e.ArrayBuffer&&e.Uint8Array&&function(t){var e,i,r,h,l,c,u,d,f;if(!(e=t.match(a)))throw new Error("invalid data URI");for(i=e[2]?e[1]:"text/plain"+(e[3]||";charset=US-ASCII"),r=!!e[4],h=t.slice(e[0].length),l=r?atob(h):decodeURIComponent(h),c=new ArrayBuffer(l.length),u=new Uint8Array(c),d=0;d<l.length;d+=1)u[d]=l.charCodeAt(d);return o?new Blob([n?u:c],{type:i}):((f=new s).append(c),f.getBlob(i))};e.HTMLCanvasElement&&!i.toBlob&&(i.mozGetAsFile?i.toBlob=function(t,e,o){var n=this;setTimeout((function(){o&&i.toDataURL&&r?t(r(n.toDataURL(e,o))):t(n.mozGetAsFile("blob",e))}))}:i.toDataURL&&r&&(i.msToBlob?i.toBlob=function(t,e,o){var n=this;setTimeout((function(){(e&&"image/png"!==e||o)&&i.toDataURL&&r?t(r(n.toDataURL(e,o))):t(n.msToBlob(e))}))}:i.toBlob=function(t,e,i){var o=this;setTimeout((function(){t(r(o.toDataURL(e,i)))}))})),t.exports?t.exports=r:e.dataURLtoBlob=r}(window)}(a);var r=a.exports,h={strict:!0,checkOrientation:!0,retainExif:!1,maxWidth:1/0,maxHeight:1/0,minWidth:0,minHeight:0,width:void 0,height:void 0,resize:"none",quality:.8,mimeType:"auto",convertTypes:["image/png"],convertSize:5e6,beforeDraw:null,drew:null,success:null,error:null},l="undefined"!=typeof window&&void 0!==window.document?window:{},c=function(t){return t>0&&t<1/0},u=Array.prototype.slice;function d(t){return Array.from?Array.from(t):u.call(t)}var f=/^image\/.+$/;function p(t){return f.test(t)}var g=String.fromCharCode;var m=l.btoa;function v(t,e){for(var i=[],o=new Uint8Array(t);o.length>0;)i.push(g.apply(null,d(o.subarray(0,8192)))),o=o.subarray(8192);return"data:".concat(e,";base64,").concat(m(i.join("")))}function w(t){var e,i=new DataView(t);try{var o,n,s;if(255===i.getUint8(0)&&216===i.getUint8(1))for(var a=i.byteLength,r=2;r+1<a;){if(255===i.getUint8(r)&&225===i.getUint8(r+1)){n=r;break}r+=1}if(n){var h=n+10;if("Exif"===function(t,e,i){var o,n="";for(i+=e,o=e;o<i;o+=1)n+=g(t.getUint8(o));return n}(i,n+4,4)){var l=i.getUint16(h);if(((o=18761===l)||19789===l)&&42===i.getUint16(h+2,o)){var c=i.getUint32(h+4,o);c>=8&&(s=h+c)}}}if(s){var u,d,f=i.getUint16(s,o);for(d=0;d<f;d+=1)if(u=s+12*d+2,274===i.getUint16(u,o)){u+=8,e=i.getUint16(u,o),i.setUint16(u,1,o);break}}}catch(t){e=1}return e}var b=/\.\d*(?:0|9){12}\d*$/;function y(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return b.test(t)?Math.round(t*e)/e:t}function x(t){var e=t.aspectRatio,i=t.height,o=t.width,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",s=c(o),a=c(i);if(s&&a){var r=i*e;("contain"===n||"none"===n)&&r>o||"cover"===n&&r<o?i=o/e:o=i*e}else s?i=o/e:a&&(o=i*e);return{width:o,height:i}}var $=l.ArrayBuffer,z=l.FileReader,M=l.URL||l.webkitURL,T=/\.\w+$/,C=l.Compressor;return function(){function t(i,o){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.file=i,this.exif=[],this.image=new Image,this.options=e(e({},h),o),this.aborted=!1,this.result=null,this.init()}return o=t,a=[{key:"noConflict",value:function(){return window.Compressor=C,t}},{key:"setDefaults",value:function(t){n(h,t)}}],(s=[{key:"init",value:function(){var t,e=this,i=this.file,o=this.options;if(t=i,"undefined"!=typeof Blob&&(t instanceof Blob||"[object Blob]"===Object.prototype.toString.call(t))){var s=i.type;if(p(s))if(M&&z){$||(o.checkOrientation=!1,o.retainExif=!1);var a="image/jpeg"===s,r=a&&o.checkOrientation,h=a&&o.retainExif;if(!M||r||h){var l=new z;this.reader=l,l.onload=function(t){var o=t.target.result,a={},l=1;r&&(l=w(o))>1&&n(a,function(t){var e=0,i=1,o=1;switch(t){case 2:i=-1;break;case 3:e=-180;break;case 4:o=-1;break;case 5:e=90,o=-1;break;case 6:e=90;break;case 7:e=90,i=-1;break;case 8:e=-90}return{rotate:e,scaleX:i,scaleY:o}}(l)),h&&(e.exif=function(t){for(var e=d(new Uint8Array(t)),i=e.length,o=[],n=0;n+3<i;){var s=e[n],a=e[n+1];if(255===s&&218===a)break;if(255===s&&216===a)n+=2;else{var r=n+(256*e[n+2]+e[n+3])+2,h=e.slice(n,r);o.push(h),n=r}}return o.reduce((function(t,e){return 255===e[0]&&225===e[1]?t.concat(e):t}),[])}(o)),a.url=r||h?!M||l>1?v(o,s):M.createObjectURL(i):o,e.load(a)},l.onabort=function(){e.fail(new Error("Aborted to read the image with FileReader."))},l.onerror=function(){e.fail(new Error("Failed to read the image with FileReader."))},l.onloadend=function(){e.reader=null},r||h?l.readAsArrayBuffer(i):l.readAsDataURL(i)}else this.load({url:M.createObjectURL(i)})}else this.fail(new Error("The current browser does not support image compression."));else this.fail(new Error("The first argument must be an image File or Blob object."))}else this.fail(new Error("The first argument must be a File or Blob object."))}},{key:"load",value:function(t){var i=this,o=this.file,n=this.image;n.onload=function(){i.draw(e(e({},t),{},{naturalWidth:n.naturalWidth,naturalHeight:n.naturalHeight}))},n.onabort=function(){i.fail(new Error("Aborted to load the image."))},n.onerror=function(){i.fail(new Error("Failed to load the image."))},l.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(l.navigator.userAgent)&&(n.crossOrigin="anonymous"),n.alt=o.name,n.src=t.url}},{key:"draw",value:function(t){var e=this,i=t.naturalWidth,o=t.naturalHeight,n=t.rotate,s=void 0===n?0:n,a=t.scaleX,h=void 0===a?1:a,l=t.scaleY,u=void 0===l?1:l,f=this.file,g=this.image,m=this.options,w=document.createElement("canvas"),b=w.getContext("2d"),$=Math.abs(s)%180==90,M=("contain"===m.resize||"cover"===m.resize)&&c(m.width)&&c(m.height),T=Math.max(m.maxWidth,0)||1/0,C=Math.max(m.maxHeight,0)||1/0,L=Math.max(m.minWidth,0)||0,E=Math.max(m.minHeight,0)||0,H=i/o,_=m.width,O=m.height;if($){var D=[C,T];T=D[0],C=D[1];var R=[E,L];L=R[0],E=R[1];var A=[O,_];_=A[0],O=A[1]}M&&(H=_/O);var V=x({aspectRatio:H,width:T,height:C},"contain");T=V.width,C=V.height;var P=x({aspectRatio:H,width:L,height:E},"cover");if(L=P.width,E=P.height,M){var B=x({aspectRatio:H,width:_,height:O},m.resize);_=B.width,O=B.height}else{var k=x({aspectRatio:H,width:_,height:O}),j=k.width;_=void 0===j?i:j;var S=k.height;O=void 0===S?o:S}var I=-(_=Math.floor(y(Math.min(Math.max(_,L),T))))/2,F=-(O=Math.floor(y(Math.min(Math.max(O,E),C))))/2,U=_,N=O,W=[];if(M){var Y,X,q,Z,K=x({aspectRatio:H,width:i,height:o},{contain:"cover",cover:"contain"}[m.resize]);q=K.width,Z=K.height,Y=(i-q)/2,X=(o-Z)/2,W.push(Y,X,q,Z)}if(W.push(I,F,U,N),$){var G=[O,_];_=G[0],O=G[1]}w.width=_,w.height=O,p(m.mimeType)||(m.mimeType=f.type);var Q="transparent";f.size>m.convertSize&&m.convertTypes.indexOf(m.mimeType)>=0&&(m.mimeType="image/jpeg");var J="image/jpeg"===m.mimeType;if(J&&(Q="#fff"),b.fillStyle=Q,b.fillRect(0,0,_,O),m.beforeDraw&&m.beforeDraw.call(this,b,w),!this.aborted&&(b.save(),b.translate(_/2,O/2),b.rotate(s*Math.PI/180),b.scale(h,u),b.drawImage.apply(b,[g].concat(W)),b.restore(),m.drew&&m.drew.call(this,b,w),!this.aborted)){var tt=function(t){if(!e.aborted){var n=function(t){return e.done({naturalWidth:i,naturalHeight:o,result:t})};if(t&&J&&m.retainExif&&e.exif&&e.exif.length>0){var s=function(t){return n(r(v(function(t,e){var i=d(new Uint8Array(t));if(255!==i[2]||224!==i[3])return t;var o=256*i[4]+i[5],n=[255,216].concat(e,i.slice(4+o));return new Uint8Array(n)}(t,e.exif),m.mimeType)))};if(t.arrayBuffer)t.arrayBuffer().then(s).catch((function(){e.fail(new Error("Failed to read the compressed image with Blob.arrayBuffer()."))}));else{var a=new z;e.reader=a,a.onload=function(t){var e=t.target;s(e.result)},a.onabort=function(){e.fail(new Error("Aborted to read the compressed image with FileReader."))},a.onerror=function(){e.fail(new Error("Failed to read the compressed image with FileReader."))},a.onloadend=function(){e.reader=null},a.readAsArrayBuffer(t)}}else n(t)}};w.toBlob?w.toBlob(tt,m.mimeType,m.quality):tt(r(w.toDataURL(m.mimeType,m.quality)))}}},{key:"done",value:function(t){var e,i,o=t.naturalWidth,n=t.naturalHeight,s=t.result,a=this.file,r=this.image,h=this.options;if(M&&0===r.src.indexOf("blob:")&&M.revokeObjectURL(r.src),s)if(h.strict&&!h.retainExif&&s.size>a.size&&h.mimeType===a.type&&!(h.width>o||h.height>n||h.minWidth>o||h.minHeight>n||h.maxWidth<o||h.maxHeight<n))s=a;else{var l=new Date;s.lastModified=l.getTime(),s.lastModifiedDate=l,s.name=a.name,s.name&&s.type!==a.type&&(s.name=s.name.replace(T,(e=s.type,"jpeg"===(i=p(e)?e.substr(6):"")&&(i="jpg"),".".concat(i))))}else s=a;this.result=s,h.success&&h.success.call(this,s)}},{key:"fail",value:function(t){var e=this.options;if(!e.error)throw t;e.error.call(this,t)}},{key:"abort",value:function(){this.aborted||(this.aborted=!0,this.reader?this.reader.abort():this.image.complete?this.fail(new Error("The compression process has been aborted.")):(this.image.onload=null,this.image.onabort()))}}])&&i(o.prototype,s),a&&i(o,a),Object.defineProperty(o,"prototype",{writable:!1}),t;var o,s,a}()}()}},e={};function i(o){var n=e[o];if(void 0!==n)return n.exports;var s=e[o]={exports:{}};return t[o].call(s.exports,s,s.exports,i),s.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var o in e)i.o(e,o)&&!i.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";i(5);var t=function(e,i){return new t.fn.init(e,i)};const e=t;var o=window.document,n=[],s=n.concat,a=n.filter,r=n.slice,h={},l={},c={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},u=/^\s*<(\w+|!)[^>]*>/,d=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,f=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,p=/^(?:body|html)$/i,g=["val","css","html","text","data","width","height","offset"],m=o.createElement("table"),v=o.createElement("tr"),w={tr:o.createElement("tbody"),tbody:m,thead:m,tfoot:m,td:v,th:v,"*":o.createElement("div")},b=/^[\w-]*$/,y={},x=y.toString,$=o.createElement("div"),z=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},M=o.documentElement.contains?function(t,e){return t!==e&&t.contains(e)}:function(t,e){for(;e&&(e=e.parentNode);)if(e===t)return!0;return!1};function T(t){return null==t?String(t):y[x.call(t)]||"object"}function C(t){return"string"==typeof t}function L(t){return"function"==T(t)}function E(t){return null!=t&&t==t.window}function H(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE}function _(t){return"object"==T(t)}function O(t){return _(t)&&!E(t)&&Object.getPrototypeOf(t)==Object.prototype}function D(t){var e=!!t&&"length"in t&&t.length,i=T(t);return"function"!=i&&!E(t)&&("array"==i||0===e||"number"==typeof e&&e>0&&e-1 in t)}function R(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function A(t,e){return"number"!=typeof e||c[R(t)]?e:e+"px"}function V(t){return t.replace(/-+(.)?/g,(function(t,e){return e?e.toUpperCase():""}))}function P(t){return t in l?l[t]:l[t]=new RegExp("(^|\\s)"+t+"(\\s|$)")}function B(t){return t instanceof e}function k(t,e,i,o){return L(e)?e.call(t,i,o):e}function j(t,e,i){null==i?t.removeAttribute(e):t.setAttribute(e,i)}function S(t,e){var i=t.className||"",o=i&&void 0!==i.baseVal;if(void 0===e)return o?i.baseVal:i;o?i.baseVal=e:t.className=e}function I(t,i){var o=t.replace(/./,(function(t){return t[0].toUpperCase()})),n=this[0];return void 0===i?E(n)?n.document.documentElement["client"+o]:H(n)?n.documentElement["scroll"+o]:function(t,e){var i={width:["padding-left","padding-right","border-left-width","border-right-width"],height:["padding-top","padding-bottom","border-top-width","border-bottom-width"]};return"border-box"!==t.css("box-sizing")||window.navigator.userAgent.indexOf("MSIE ")>0||navigator.userAgent.match(/Trident.*rv:11\./)?parseFloat(t.css(e)):parseFloat(t.css(e))-parseFloat(t.css(i[e][0]))-parseFloat(t.css(i[e][1]))-parseFloat(t.css(i[e][2]))-parseFloat(t.css(i[e][3]))}(this,t):this.each((function(o){(n=e(this)).css(t,k(this,i,o,n[t]()))}))}e.fn=e.prototype={constuctor:e,length:0,forEach:n.forEach,reduce:n.reduce,push:n.push,sort:n.sort,splice:n.splice,indexOf:n.indexOf,init:function(t,i){var n,s;if(!t)return this;if("string"==typeof t)if("<"==(t=t.trim())[0]&&u.test(t))n=e.fragment(t,RegExp.$1,i),t=null;else{if(void 0!==i)return e(i).find(t);n=e.qsa(o,t)}else{if(L(t))return e(o).ready(t);if(B(t))return t;if(z(t))s=t,n=a.call(s,(function(t){return null!=t}));else if(_(t))n=[t],t=null;else{if(void 0!==i)return e(i).find(t);n=e.qsa(o,t)}}return e.makeArray(n,t,this)},concat:function(){var t,e,i=[];for(t=0;t<arguments.length;t++)e=arguments[t],i[t]=B(e)?e.toArray():e;return s.apply(B(this)?this.toArray():this,i)},pluck:function(t){return e.map(this,(function(e){return e[t]}))},toArray:function(){return this.get()},get:function(t){return void 0===t?r.call(this):this[t>=0?t:t+this.length]},size:function(){return this.length},each:function(t){return n.every.call(this,(function(e,i){return!1!==t.call(e,i,e)})),this},map:function(t){return e(e.map(this,(function(e,i){return t.call(e,i,e)})))},slice:function(){return e(r.apply(this,arguments))},first:function(){var t=this[0];return t&&!_(t)?t:e(t)},last:function(){var t=this[this.length-1];return t&&!_(t)?t:e(t)},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)}},e.extend=e.fn.extend=function(){var t,i,o,n,s,a,r=arguments[0]||{},h=1,l=arguments.length,c=!1;for("boolean"==typeof r&&(c=r,r=arguments[h]||{},h++),"object"==typeof r||L(r)||(r={}),h===l&&(r=this,h--);h<l;h++)if(null!=(t=arguments[h]))for(i in t)o=r[i],r!==(n=t[i])&&(c&&n&&(O(n)||(s=z(n)))?(s?(s=!1,a=o&&z(o)?o:[]):a=o&&O(o)?o:{},r[i]=e.extend(c,a,n)):void 0!==n&&(r[i]=n));return r},e.extend({makeArray:function(t,e,i){var o,n=t?t.length:0;for(o=0;o<n;o++)i[o]=t[o];return i.length=n,i.selector=e||"",i},merge:function(t,e){for(var i=+e.length,o=0,n=t.length;o<i;o++)t[n++]=e[o];return t.length=n,t},qsa:function(t,e){var i,o="#"==e[0],n=!o&&"."==e[0],s=o||n?e.slice(1):e,a=b.test(s);return t.getElementById&&a&&o?(i=t.getElementById(s))?[i]:[]:1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType?[]:r.call(a&&!o&&t.getElementsByClassName?n?t.getElementsByClassName(s):t.getElementsByTagName(e):t.querySelectorAll(e))},fragment:function(t,i,n){var s,a,h;return d.test(t)&&(s=e(o.createElement(RegExp.$1))),s||(t.replace&&(t=t.replace(f,"<$1></$2>")),void 0===i&&(i=u.test(t)&&RegExp.$1),i in w||(i="*"),(h=w[i]).innerHTML=""+t,s=e.each(r.call(h.childNodes),(function(){h.removeChild(this)}))),O(n)&&(a=e(s),e.each(n,(function(t,e){g.indexOf(t)>-1?a[t](e):a.attr(t,e)}))),s},matches:function(t,i){if(!i||!t||1!==t.nodeType)return!1;var o=t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.matchesSelector;if(o)return o.call(t,i);var n,s=t.parentNode,a=!s;return a&&(s=$).appendChild(t),n=~e.qsa(s,i).indexOf(t),a&&$.removeChild(t),n},each:function(t,e){var i,o;if(D(t)){for(i=0;i<t.length;i++)if(!1===e.call(t[i],i,t[i]))return t}else for(o in t)if(!1===e.call(t[o],o,t[o]))return t;return t},map:function(t,i){var o,n,s,a,r=[];if(D(t))for(n=0;n<t.length;n++)null!=(o=i(t[n],n))&&r.push(o);else for(s in t)null!=(o=i(t[s],s))&&r.push(o);return(a=r).length>0?e.fn.concat.apply([],a):a}}),e.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),(function(t,e){y["[object "+e+"]"]=e.toLowerCase()})),e.fn.init.prototype=e.fn;var F=1,U={},N="onfocusin"in window,W={focus:"focusin",blur:"focusout"},Y={mouseenter:"mouseover",mouseleave:"mouseout"},X=/^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,q=function(){return!0},Z=function(){return!1},K={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function G(t){return t._zid||(t._zid=F++)}function Q(t,i){if(i||!t.isDefaultPrevented){i||(i=t),e.each(K,(function(e,o){var n=i[e];t[e]=function(){return this[o]=q,n&&n.apply(i,arguments)},t[o]=Z}));try{t.timeStamp||(t.timeStamp=Date.now())}catch(t){console.warn(t)}(void 0!==i.defaultPrevented?i.defaultPrevented:"returnValue"in i?!1===i.returnValue:i.getPreventDefault&&i.getPreventDefault())&&(t.isDefaultPrevented=q)}return t}function J(t){var e=(""+t).split(".");return{e:e[0],ns:e.slice(1).sort().join(" ")}}function tt(t,e){return t.del&&!N&&t.e in W||!!e}function et(t){return Y[t]||N&&W[t]||t}function it(t,e,i,o,n){var s=G(t);(e||"").split(/\s/).forEach((function(e){(function(t,e,i,o){if((e=J(e)).ns)var n=(s=e.ns,new RegExp("(?:^| )"+s.replace(" "," .* ?")+"(?: |$)"));var s;return(U[G(t)]||[]).filter((function(t){return t&&(!e.e||t.e==e.e)&&(!e.ns||n.test(t.ns))&&(!i||G(t.fn)===G(i))&&(!o||t.sel==o)}))})(t,e,i,o).forEach((function(e){delete U[s][e.i],"removeEventListener"in t&&t.removeEventListener(et(e.e),e.proxy,tt(e,n))}))}))}function ot(t,e){e(t);for(var i=0,o=t.childNodes.length;i<o;i++)ot(t.childNodes[i],e)}function nt(t,i,n,s){var a,r,h=e.map(i,(function(t){var i=[];return"array"==(a=T(t))?(t.forEach((function(t){return void 0!==t.nodeType?i.push(t):B(t)?i=i.concat(t.get()):void(i=i.concat(e.fragment(t)))})),i):"object"==a||null==t?t:e.fragment(t)})),l=t.length>1;return h.length<1?t:t.each((function(t,i){r=s?i:i.parentNode;var a=M(o.documentElement,r);h.forEach((function(t){if(l)t=t.cloneNode(!0);else if(!r)return e(t).remove();n.call(i,t),a&&ot(t,(function(t){if(!(null==t.nodeName||"SCRIPT"!==t.nodeName.toUpperCase()||t.type&&"text/javascript"!==t.type||t.src)){var e=t.ownerDocument?t.ownerDocument.defaultView:window;e.eval.call(e,t.innerHTML)}}))}))}))}var st,at="",rt=o.createElement("div"),ht=rt.style.transitionProperty;function lt(t){return st?st+t:t.toLowerCase()}void 0===rt.style.transform&&e.each({Webkit:"webkit",Moz:"",O:"o"},(function(t,e){if(void 0!==rt.style[t+"TransitionProperty"])return at="-"+t.toLowerCase()+"-",st=e,!1})),rt=null,e.fx={off:void 0===st&&void 0===ht,speeds:{_default:400,fast:200,slow:600},cssPrefix:at,transitionEnd:lt("TransitionEnd"),animationEnd:lt("AnimationEnd")};var ct,ut,dt,ft,pt,gt,mt,vt,wt,bt=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,yt={};function xt(){return this.each((function(){var t,e,i;"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=(t=this.nodeName,h[t]||(e=o.createElement(t),o.body.appendChild(e),i=getComputedStyle(e,"").getPropertyValue("display"),e.parentNode.removeChild(e),"none"==i&&(i="block"),h[t]=i),h[t]))}))}function $t(){return this.css("display","none")}function zt(t,i,o,n,s){"function"!=typeof i||s||(s=i,i=void 0);var a={opacity:o};return n&&(a.scale=n,t.css(e.fx.cssPrefix+"transform-origin","0 0")),t.animate(a,i,null,s)}ct=at+"transform",yt[ut=at+"transition-property"]=yt[dt=at+"transition-duration"]=yt[pt=at+"transition-delay"]=yt[ft=at+"transition-timing-function"]=yt[gt=at+"animation-name"]=yt[mt=at+"animation-duration"]=yt[wt=at+"animation-delay"]=yt[vt=at+"animation-timing-function"]="";const Mt={isPlainObject:O,isArray:z,noop:function(){}},Tt={find:function(t){var i=this;return t?"object"==typeof t?e(t).filter((function(){var t=this;return n.some.call(i,(function(e){return M(e,t)}))})):1==this.length?e(e.qsa(this[0],t)):this.map((function(){return e.qsa(this,t)})):e()},closest:function(t,i){var o=[],n="object"==typeof t&&e(t);return this.each((function(s,a){for(;a&&!(n?n.indexOf(a)>=0:e.matches(a,t));)a=a!==i&&!H(a)&&a.parentNode;a&&o.indexOf(a)<0&&o.push(a)})),e(o)},css:function(t,i){if(arguments.length<2){var o=this[0];if("string"==typeof t){if(!o)return;return o.style[V(t)]||getComputedStyle(o,"").getPropertyValue(t)}if(z(t)){if(!o)return;var n={},s=getComputedStyle(o,"");return e.each(t,(function(t,e){n[e]=o.style[V(e)]||s.getPropertyValue(e)})),n}}var a="";if("string"==T(t))i||0===i?a=R(t)+":"+A(t,i):this.each((function(){this.style.removeProperty(R(t))}));else for(var r in t)t[r]||0===t[r]?a+=R(r)+":"+A(r,t[r])+";":this.each((function(){this.style.removeProperty(R(r))}));return this.each((function(){this.style.cssText+=";"+a}))},addClass:function(t){var i=[];return t?this.each((function(o){if("className"in this){i=[];var n=S(this);k(this,t,o,n).split(/\s+/g).forEach((function(t){e(this).hasClass(t)||i.push(t)}),this),i.length&&S(this,n+(n?" ":"")+i.join(" "))}})):this},hasClass:function(t){return!!t&&n.some.call(this,(function(t){return this.test(S(t))}),P(t))},removeClass:function(t){var e=[];return this.each((function(i){if("className"in this){if(void 0===t)return S(this,"");e=S(this),k(this,t,i,e).split(/\s+/g).forEach((function(t){e=e.replace(P(t)," ")})),S(this,e.trim())}}))},attr:function(t,e){var i;return"string"!=typeof t||1 in arguments?this.each((function(i){if(1===this.nodeType)if(_(t))for(var o in t)j(this,o,t[o]);else j(this,t,k(this,e,i,this.getAttribute(t)))})):0 in this&&1==this[0].nodeType&&null!=(i=this[0].getAttribute(t))?i:void 0},removeAttr:function(t){return this.each((function(){1===this.nodeType&&t.split(" ").forEach((function(t){j(this,t)}),this)}))},append:function(){return nt(this,arguments,(function(t){this.insertBefore(t,null)}),!0)},remove:function(){return this.each((function(){var t,i;1===this.nodeType&&function(t){for(var e,i,o=0;void 0!==(i=t[o]);o++)i._zid&&(e=U[i._zid])&&e.forEach((t=>{const e=t.e+"."+t.ns.split(" ").join(".");it(i,e,t.fn,t.sel)}))}((i=void 0!==(t=this).getElementsByTagName?t.getElementsByTagName("*"):void 0!==t.querySelectorAll?t.querySelectorAll("*"):[],e.merge([t],i))),null!=this.parentNode&&this.parentNode.removeChild(this)}))},empty:function(){return this.each((function(){this.innerHTML=""}))},html:function(t){return 0 in arguments?this.each((function(i){var o=this.innerHTML;e(this).empty().append(k(this,t,i,o))})):0 in this?this[0].innerHTML:null},width:function(t){return I.call(this,"width",t)},height:function(t){return I.call(this,"height",t)},scrollTop:function(t){if(this.length){var e="scrollTop"in this[0];return void 0===t?e?this[0].scrollTop:E(this[0])?this[0].pageYOffset:this[0].defaultView.pageYOffset:this.each(e?function(){this.scrollTop=t}:function(){this.scrollTo(this.scrollX,t)})}},scrollLeft:function(t){if(this.length){var e="scrollLeft"in this[0];return void 0===t?e?this[0].scrollLeft:E(this[0])?this[0].pageXOffset:this[0].defaultView.pageXOffset:this.each(e?function(){this.scrollLeft=t}:function(){this.scrollTo(t,this.scrollY)})}},offset:function(t){if(t)return this.each((function(i){var o=e(this),n=k(this,t,i,o.offset()),s=o.offsetParent().offset(),a={top:n.top-s.top,left:n.left-s.left};"static"==o.css("position")&&(a.position="relative"),o.css(a)}));if(!this.length)return null;if(o.documentElement!==this[0]&&!M(o.documentElement,this[0]))return{top:0,left:0};var i=this[0].getBoundingClientRect();return{left:i.left+window.pageXOffset,top:i.top+window.pageYOffset,width:Math.round(i.width),height:Math.round(i.height)}},offsetParent:function(){return this.map((function(){for(var t=this.offsetParent||o.body;t&&!p.test(t.nodeName)&&"static"==e(t).css("position");)t=t.offsetParent;return t}))},position:function(){if(this.length){var t,i=this[0],o=this.offsetParent(),n=p.test(o[0].nodeName)?{top:0,left:0}:o.offset();return"fixed"===e(i).css("position")?t=i.getBoundingClientRect():(t=this.offset(),n.top+=parseFloat(e(o[0]).css("border-top-width"))||0,n.left+=parseFloat(e(o[0]).css("border-left-width"))||0),{top:t.top-n.top-parseFloat(e(i).css("margin-top"))||0,left:t.left-n.left-parseFloat(e(i).css("margin-left"))||0}}},on:function(t,i,n,s,a){var h,l,c=this;return t&&!C(t)?(e.each(t,(function(t,e){c.on(t,i,n,e,a)})),c):(C(i)||L(s)||!1===s||(s=n,n=i,i=void 0),void 0!==s&&!1!==n||(s=n,n=void 0),!1===s&&(s=Z),c.each((function(c,u){a&&(h=function(t){return it(u,t.type,s),s.apply(this,arguments)}),i&&(l=function(t){var o,n=e(t.target).closest(i,u).get(0);if(n&&n!==u)return o=e.extend(function(t){var e,i={originalEvent:t};for(e in t)X.test(e)||void 0===t[e]||(i[e]=t[e]);return Q(i,t)}(t),{currentTarget:n,liveFired:u}),(h||s).apply(n,[o].concat(r.call(arguments,1)))}),function(t,i,n,s,a,r,h){var l=G(t),c=U[l]||(U[l]=[]);i.split(/\s/).forEach((function(i){if("ready"==i)return e(o).ready(n);var h=J(i);h.fn=n,h.sel=a,h.e in Y&&(n=function(t){var e=t.relatedTarget;if(!e||e!==this&&!M(this,e))return h.fn.apply(this,arguments)}),h.del=r;var l=r||n;h.proxy=function(e){if(!(e=Q(e)).isImmediatePropagationStopped()){e.data=s;var i=l.apply(t,null==e._args?[e]:[e].concat(e._args));return!1===i&&(e.preventDefault(),e.stopPropagation()),i}},h.i=c.length,c.push(h),"addEventListener"in t&&t.addEventListener(et(h.e),h.proxy,tt(h,undefined))}))}(u,t,s,n,i,l||h)})))},off:function(t,i,o){var n=this;return t&&!C(t)?(e.each(t,(function(t,e){n.off(t,i,e)})),n):(C(i)||L(o)||!1===o||(o=i,i=void 0),!1===o&&(o=Z),n.each((function(){it(this,t,o,i)})))},show:function(t,e){return xt.call(this),void 0===t?t=0:this.css("opacity",0),zt(this,t,1,"1,1",e)},hide:function(t,i){return void 0===t?$t.call(this):function(t,i,o,n){return zt(t,i,0,o,(function(){$t.call(e(this)),n&&n.call(this)}))}(this,t,"0,0",i)},anim:function(t,i,o,n,s){var a,r,h,l={},c="",u=this,d=e.fx.transitionEnd,f=!1;if(void 0===i&&(i=e.fx.speeds._default/1e3),void 0===s&&(s=0),e.fx.off&&(i=0),"string"==typeof t)l[gt]=t,l[mt]=i+"s",l[wt]=s+"s",l[vt]=o||"linear",d=e.fx.animationEnd;else{for(a in r=[],t)bt.test(a)?c+=a+"("+t[a]+") ":(l[a]=t[a],r.push(a.replace(/([A-Z])/g,"-$1").toLowerCase()));c&&(l[ct]=c,r.push(ct)),i>0&&"object"==typeof t&&(l[ut]=r.join(", "),l[dt]=i+"s",l[pt]=s+"s",l[ft]=o||"linear")}return h=function(t){if(void 0!==t){if(t.target!==t.currentTarget)return;e(t.target).off(d,h)}else e(this).off(d,h);f=!0,e(this).css(yt),n&&n.call(this)},i>0&&(this.on(d,h),setTimeout((function(){f||h.call(u)}),1e3*(i+s)+25)),this.size()&&this.get(0).clientLeft,this.css(l),i<=0&&setTimeout((function(){u.each((function(){h.call(this)}))}),0),this},animate:function(t,i,o,n,s){return L(i)&&(n=i,o=void 0,i=void 0),L(o)&&(n=o,o=void 0),O(i)&&(o=i.easing,n=i.complete,s=i.delay,i=i.duration),i&&(i=("number"==typeof i?i:e.fx.speeds[i]||e.fx.speeds._default)/1e3),s&&(s=parseFloat(s)/1e3),this.anim(t,i,o,n,s)},fadeTo:function(t,e,i){return zt(this,t,e,null,i)},fadeIn:function(t,e){var i=this.css("opacity");return i>0?this.css("opacity",0):i=1,xt.call(this).fadeTo(t,i,e)}};e.extend(Mt),e.fn.extend(Tt);const Ct=e,Lt={draggable:!0,resizable:!0,movable:!0,keyboard:!0,title:!0,modalWidth:320,modalHeight:320,fixedModalSize:!1,initMaximized:!1,gapThreshold:.02,ratioThreshold:.1,minRatio:.05,maxRatio:16,headerToolbar:["maximize","close"],footerToolbar:["zoomIn","zoomOut","prev","fullscreen","next","actualSize","rotateRight"],icons:{minimize:'<svg viewBox="0 0 24 24" class="svg-inline-icon">\n        <path fill="currentColor" d="M20,14H4V10H20"></path>\n      </svg>',maximize:'<svg viewBox="0 0 24 24" class="svg-inline-icon">\n        <path fill="currentColor" d="M4,4H20V20H4V4M6,8V18H18V8H6Z"></path>\n      </svg>',close:'<svg viewBox="0 0 24 24" class="svg-inline-icon">\n        <path fill="currentColor" d="M13.46,12L19,17.54V19H17.54L12,13.46L6.46,19H5V17.54L10.54,12\n        L5,6.46V5H6.46L12,10.54L17.54,5H19V6.46L13.46,12Z"></path>\n      </svg>',zoomIn:'<svg viewBox="0 0 24 24" class="svg-inline-icon">\n        <path fill="currentColor" d="M15.5,14L20.5,19L19,20.5L14,15.5V14.71L13.73,14.43\n        C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3A6.5,6.5 0 0,1 16,9.5\n        C16,11.11 15.41,12.59 14.43,13.73L14.71,14H15.5M9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5\n        C7,5 5,7 5,9.5C5,12 7,14 9.5,14M12,10H10V12H9V10H7V9H9V7H10V9H12V10Z"></path>\n      </svg>',zoomOut:'<svg viewBox="0 0 24 24" class="svg-inline-icon">\n        <path fill="currentColor" d="M15.5,14H14.71L14.43,13.73C15.41,12.59 16,11.11 16,9.5\n        A6.5,6.5 0 0,0 9.5,3A6.5,6.5 0 0,0 3,9.5A6.5,6.5 0 0,0 9.5,16\n        C11.11,16 12.59,15.41 13.73,14.43L14,14.71V15.5L19,20.5L20.5,19L15.5,14M9.5,14\n        C7,14 5,12 5,9.5C5,7 7,5 9.5,5C12,5 14,7 14,9.5C14,12 12,14 9.5,14M7,9H12V10H7V9Z"></path>\n      </svg>',prev:'<svg viewBox="0 0 24 24" class="svg-inline-icon">\n        <path fill="currentColor" d="M6,18V6H8V18H6M9.5,12L18,6V18L9.5,12Z"></path>\n      </svg>',next:'<svg viewBox="0 0 24 24" class="svg-inline-icon">\n        <path fill="currentColor" d="M16,18H18V6H16M6,18L14.5,12L6,6V18Z"></path>\n      </svg>',fullscreen:'<svg viewBox="0 0 24 24" class="svg-inline-icon">\n        <path fill="currentColor" d="M8.5,12.5L11,15.5L14.5,11L19,17H5M23,18V6A2,2 0 0,0 21,4H3\n        A2,2 0 0,0 1,6V18A2,2 0 0,0 3,20H21A2,2 0 0,0 23,18Z"></path>\n      </svg>',actualSize:'<svg viewBox="0 0 24 24" class="svg-inline-icon">\n        <path fill="currentColor" d="M9.5,13.09L10.91,14.5L6.41,19H10V21H3V14H5V17.59L9.5,13.09\n        M10.91,9.5L9.5,10.91L5,6.41V10H3V3H10V5H6.41L10.91,9.5M14.5,13.09L19,17.59V14H21V21H14V19\n        H17.59L13.09,14.5L14.5,13.09M13.09,9.5L17.59,5H14V3H21V10H19V6.41L14.5,10.91\n        L13.09,9.5Z"></path>\n      </svg>',rotateLeft:'<svg viewBox="0 0 24 24" class="svg-inline-icon">\n        <path fill="currentColor" d="M13,4.07V1L8.45,5.55L13,10V6.09C15.84,6.57 18,9.03 18,12\n        C18,14.97 15.84,17.43 13,17.91V19.93C16.95,19.44 20,16.08 20,12C20,7.92 16.95,4.56 13,4.07\n        M7.1,18.32C8.26,19.22 9.61,19.76 11,19.93V17.9C10.13,17.75 9.29,17.41 8.54,16.87L7.1,18.32\n        M6.09,13H4.07C4.24,14.39 4.79,15.73 5.69,16.89L7.1,15.47C6.58,14.72 6.23,13.88 6.09,13\n        M7.11,8.53L5.7,7.11C4.8,8.27 4.24,9.61 4.07,11H6.09C6.23,10.13 6.58,9.28 7.11,8.53Z"></path>\n      </svg>',rotateRight:'<svg viewBox="0 0 24 24" class="svg-inline-icon">\n        <path fill="currentColor" d="M16.89,15.5L18.31,16.89C19.21,15.73 19.76,14.39 19.93,13H17.91\n        C17.77,13.87 17.43,14.72 16.89,15.5M13,17.9V19.92C14.39,19.75 15.74,19.21 16.9,18.31\n        L15.46,16.87C14.71,17.41 13.87,17.76 13,17.9M19.93,11C19.76,9.61 19.21,8.27 18.31,7.11\n        L16.89,8.53C17.43,9.28 17.77,10.13 17.91,11M15.55,5.55L11,1V4.07C7.06,4.56 4,7.92 4,12\n        C4,16.08 7.05,19.44 11,19.93V17.91C8.16,17.43 6,14.97 6,12C6,9.03 8.16,6.57 11,6.09V10\n        L15.55,5.55Z"></path>\n      </svg>'},i18n:{minimize:"Minimize",maximize:"Maximize (Alt+X)",close:"Close (Q)",zoomIn:"Zoom-in (+)",zoomOut:"Zoom-out (-)",prev:"Prev (←)",next:"Next (→)",fullscreen:"Fullscreen (F)",actualSize:"Actual-size (Ctrl+Alt+0)",rotateLeft:"Rotate-left (Ctrl+,)",rotateRight:"Rotate-right (Ctrl+.)"},multiInstances:!0,initAnimation:!0,animationDuration:400,animationEasing:"ease-in-out",fixedModalPos:!1,zIndex:1090,dragHandle:null,callbacks:{beforeOpen:Ct.noop,opened:Ct.noop,beforeClose:Ct.noop,closed:Ct.noop,beforeChange:Ct.noop,changed:Ct.noop},index:0,progressiveLoading:!0,appendTo:"body",customButtons:{},positionFixed:!0,initModalPos:null},Et=window.document;function Ht(t,e,i,o){const n=o?t.h:t.w,s=o?t.w:t.h;(s>e.h||n>e.w)&&i.addClass("is-grab"),s<=e.h&&n<=e.w&&i.removeClass("is-grab")}function _t(){return!!("ontouchstart"in window||window.DocumentTouch&&Et instanceof window.DocumentTouch)}function Ot(t){return/^(?:body|html)$/i.test(t.nodeName)}function Dt(t,e){return e.reduce(((e,i)=>e+parseFloat(t.css(i))),0)}function Rt(t){return"border-box"===t.css("box-sizing")}function At(t,e,i,o,n){let s=1;return s=n?Math.min(i/e,o/t,1):Math.min(i/t,o/e,1),s}const Vt=Ct(window),Pt=Ct(Et),Bt="click",kt="resize",jt=_t()?"touchstart":"mousedown",St=_t()?"touchmove":"mousemove",It=_t()?"touchend":"mouseup",Ft="photoviewer",Ut="."+Ft,Nt="."+Ft,Wt={isMoving:!1,isResizing:!1,zIndex:0},Yt=`html, body, .${Ft}-modal, .${Ft}-stage, .${Ft}-button, .${Ft}-resizable-handle`,Xt=`html, body, .${Ft}-modal, .${Ft}-stage, .${Ft}-button`;class qt{static instances=[];isOpened=!1;isMaximized=!1;isRotated=!1;rotationDegree=0;imageData={};modalData={width:null,height:null,left:null,top:null};_lastTimestamp=0;constructor(t,e){this.init(t,e)}init(t,e){this.options=Ct.extend(!0,{},Lt,e),e&&Ct.isArray(e.footerToolbar)&&(this.options.footerToolbar=e.footerToolbar),e&&Ct.isArray(e.headerToolbar)&&(this.options.headerToolbar=e.headerToolbar),Wt.zIndex=0===Wt.zIndex?this.options.zIndex:Wt.zIndex,this.open(),this.images=t,this.index=this.options.index,this._loadImage(this.index),this.options.draggable&&this.draggable(this.$photoviewer,this.dragHandle,Ut+"-button"),this.options.movable&&this.movable(this.$stage,this.$image),this.options.resizable&&this.resizable(this.$photoviewer,this.$stage,this.$image,this.options)}_createBtns(t){const e=["minimize","maximize","close","zoomIn","zoomOut","prev","next","fullscreen","actualSize","rotateLeft","rotateRight"];let i="";return Ct.each(t,((t,o)=>{const n=`${Ft}-button ${Ft}-button-${o}`;e.indexOf(o)>=0?i+=`<button class="${n}" title="${this.options.i18n[o]}">\n          ${this.options.icons[o]}\n          </button>`:this.options.customButtons[o]&&(i+=`<button class="${n}" title="${this.options.customButtons[o].title||""}">\n          ${this.options.customButtons[o].text}\n          </button>`)})),i}_createTitle(){return this.options.title?`<div class="${Ft}-title"></div>`:""}_createTemplate(){return`<div class="${Ft}-modal" tabindex="0" role="dialog">\n        <div class="${Ft}-inner">\n          <div class="${Ft}-header">\n            <div class="${Ft}-toolbar ${Ft}-toolbar-header">\n            ${this._createBtns(this.options.headerToolbar)}\n            </div>\n            ${this._createTitle()}\n          </div>\n          <div class="${Ft}-stage">\n            <img class="${Ft}-image" src="" alt="" />\n          </div>\n          <div class="${Ft}-footer">\n            <div class="${Ft}-toolbar ${Ft}-toolbar-footer">\n            ${this._createBtns(this.options.footerToolbar)}\n            </div>\n          </div>\n        </div>\n      </div>`}_build(){const t=this._createTemplate(),e=Ct(t);this.$photoviewer=e,this.$stage=e.find(Ut+"-stage"),this.$title=e.find(Ut+"-title"),this.$image=e.find(Ut+"-image"),this.$close=e.find(Ut+"-button-close"),this.$maximize=e.find(Ut+"-button-maximize"),this.$minimize=e.find(Ut+"-button-minimize"),this.$zoomIn=e.find(Ut+"-button-zoomIn"),this.$zoomOut=e.find(Ut+"-button-zoomOut"),this.$actualSize=e.find(Ut+"-button-actualSize"),this.$fullscreen=e.find(Ut+"-button-fullscreen"),this.$rotateLeft=e.find(Ut+"-button-rotateLeft"),this.$rotateRight=e.find(Ut+"-button-rotateRight"),this.$prev=e.find(Ut+"-button-prev"),this.$next=e.find(Ut+"-button-next"),this.$stage.addClass("stage-ready"),this.$image.addClass("image-ready"),this.$photoviewer.css("z-index",Wt.zIndex),this.options.positionFixed&&this.$photoviewer.css({position:"fixed"}),this.options.dragHandle&&this.options.dragHandle!==Ut+"-modal"?this.dragHandle=this.$photoviewer.find(this.options.dragHandle):this.dragHandle=this.$photoviewer,Ct(this.options.appendTo).eq(0).append(this.$photoviewer),this._stageEdgeValue={horizontal:Dt(this.$stage,["left","right","border-left-width","border-right-width"]),vertical:Dt(this.$stage,["top","bottom","border-top-width","border-bottom-width"])},this._modalEdgeValue={horizontal:Dt(this.$photoviewer,["padding-left","padding-right","border-left-width","border-right-width"]),vertical:Dt(this.$photoviewer,["padding-top","padding-bottom","border-top-width","border-bottom-width"])},this._addEvents(),this._addCustomButtonEvents()}open(){this._triggerHook("beforeOpen",this),!this.options.multiInstances&&qt.instances.length>0&&qt.instances[0].close(),this._build(),this._setInitModalPos(),qt.instances.push(this),this._triggerHook("opened",this)}close(){this._triggerHook("beforeClose",this),this.$photoviewer.remove(),qt.instances=qt.instances.filter((t=>t!==this)),0===qt.instances.length&&(Wt.zIndex=this.options.zIndex,Vt.off(kt+Nt)),this._triggerHook("closed",this)}_getOffsetParentData(){const t=Ct(this.options.appendTo)[0];return{width:this.options.positionFixed||Ot(t)?Vt.width():t.clientWidth,height:this.options.positionFixed||Ot(t)?Vt.height():t.clientHeight,scrollLeft:this.options.positionFixed?0:Ot(t)?Pt.scrollLeft():t.scrollLeft,scrollTop:this.options.positionFixed?0:Ot(t)?Pt.scrollTop():t.scrollTop}}_setModalToCenter(){let t,e,i,o,n=0,s=0;if(Rt(this.$photoviewer)||(n+=this._modalEdgeValue.horizontal,s+=this._modalEdgeValue.vertical),Ct.isPlainObject(this.options.initModalPos))t=this.options.initModalPos.left,e=this.options.initModalPos.top,i=this.options.initModalPos.right,o=this.options.initModalPos.bottom;else{const i=this._getOffsetParentData();t=(i.width-this.options.modalWidth-n)/2+i.scrollLeft,e=(i.height-this.options.modalHeight-s)/2+i.scrollTop}const a={width:this.modalData.width||this.options.modalWidth,height:this.modalData.height||this.options.modalHeight,left:this.modalData.left||t,top:this.modalData.top||e,right:this.modalData.right||i,bottom:this.modalData.bottom||o};this.$photoviewer.css(a)}_setInitModalPos(){this.options.initMaximized?(this.maximize(),this.isOpened=!0):this._setModalToCenter(),this.$photoviewer[0].focus()}_setModalSize(){let t=this.imageData.originalWidth+this._stageEdgeValue.horizontal,e=this.imageData.originalHeight+this._stageEdgeValue.vertical,i=0,o=0;Rt(this.$photoviewer)?(t+=this._modalEdgeValue.horizontal,e+=this._modalEdgeValue.vertical):(i+=this._modalEdgeValue.horizontal,o+=this._modalEdgeValue.vertical);const n=this._getOffsetParentData(),s=Math.max(this.options.gapThreshold,0)+1,a=Math.min(n.width/((t+i)*s),n.height/((e+o)*s),1);let r,h,l,c,u=Math.max(t*a,this.options.modalWidth),d=Math.max(e*a,this.options.modalHeight);u=this.options.fixedModalSize?this.options.modalWidth:Math.round(u),d=this.options.fixedModalSize?this.options.modalHeight:Math.round(d),Ct.isPlainObject(this.options.initModalPos)?(r=this.options.initModalPos.left,h=this.options.initModalPos.top,l=this.options.initModalPos.right,c=this.options.initModalPos.bottom):(r=(n.width-u-i)/2+n.scrollLeft,h=(n.height-d-o)/2+n.scrollTop);const f={width:u,height:d,left:r,top:h,right:l,bottom:c};this.options.initAnimation?this.$photoviewer.animate(f,this.options.animationDuration,this.options.animationEasing,(()=>{this._setImageSize()})):(this.$photoviewer.css(f),this._setImageSize()),this.isOpened=!0}_setImageSize(){const t=this.$stage.width(),e=this.$stage.height(),{originalWidth:i,originalHeight:o}=this.imageData,n=At(i,o,t,e,this.isRotated),s=i*n,a=o*n;this.$image.css({width:Math.round(s),height:Math.round(a),left:(t-Math.round(s))/2,top:(e-Math.round(a))/2}),Ct.extend(this.imageData,{initWidth:s,initHeight:a,initLeft:(t-s)/2,initTop:(e-a)/2,width:s,height:a,left:(t-s)/2,top:(e-a)/2}),Ht({w:s,h:a},{w:t,h:e},this.$stage,this.isRotated),this.imageLoaded||(this.$photoviewer.find(Ut+"-loader").remove(),this.$stage.removeClass("stage-ready"),this.$image.removeClass("image-ready"),this.options.initAnimation&&!this.options.progressiveLoading&&this.$image.fadeIn(),this.imageLoaded=!0)}_loadImage(t,e,i){const o=this.images[t]?.src;o&&(this.$image.removeAttr("style").attr("src",""),this.isRotated=!1,this.rotationDegree=0,this.imageLoaded=!1,this.$photoviewer.append(`<div class="${Ft}-loader"></div>`),this.$stage.addClass("stage-ready"),this.$image.addClass("image-ready"),this.options.initAnimation&&!this.options.progressiveLoading&&this.$image.hide(),this.$image.attr("src",o),function(t,e,i){const o=new Image;o.onload=function(){e(o)},o.onerror=function(){i()},o.src=t}(o,(t=>{this.imageData={originalWidth:t.width,originalHeight:t.height},this.isMaximized||this.isOpened&&this.options.fixedModalPos?this._setImageSize():this._setModalSize(),e&&e.call()}),(()=>{this.$photoviewer.find(Ut+"-loader").remove(),i&&i.call()})),this.options.title&&o&&this._setImageTitle(o))}_setImageTitle(t){const e=this.images[this.index].title||function(t){return t.replace(/^.*?\/*([^/?]*)\.[a-z]+(\?.+|$)/gi,"$1")}(t);this.$title.html(e)}jump(t){this._triggerHook("beforeChange",[this,this.index]);const e=Date.now();e-this._lastTimestamp>=this.options.animationDuration&&(this.index=this.index+t,this.jumpTo(this.index),this._lastTimestamp=e)}jumpTo(t){(t%=this.images.length)>=0?t%=this.images.length:t<0&&(t=(this.images.length+t)%this.images.length),this.index=t,this._loadImage(t,(()=>{this._triggerHook("changed",[this,t])}),(()=>{this._triggerHook("changed",[this,t])}))}_wheel(t){t.preventDefault();let e=1;t.deltaY?e=t.deltaY>0?1:-1:t.wheelDelta?e=-t.wheelDelta/120:t.detail&&(e=t.detail>0?1:-1);const i=-e*this.options.ratioThreshold,o={x:t.clientX-this.$stage.offset().left+Pt.scrollLeft(),y:t.clientY-this.$stage.offset().top+Pt.scrollTop()};this.zoom(i,o)}zoom(t,e){t=t<0?1/(1-t):1+t,(t=this.$image.width()/this.imageData.originalWidth*t)>this.options.maxRatio||t<this.options.minRatio||this.zoomTo(t,e)}zoomTo(t,e){const{originalWidth:i,originalHeight:o,width:n,height:s,left:a,top:r,initWidth:h}=this.imageData,l=this.$stage.width(),c=this.$stage.height();void 0===e&&(e={x:l/2,y:c/2});const u=i*t,d=o*t;let f=e.x-(e.x-a)/n*u,p=e.y-(e.y-r)/s*d;const g=this.isRotated?(u-d)/2:0,m=this.isRotated?d:u,v=this.isRotated?u:d,w=l-u,b=c-d;f=m<=l?w/2:f>-g?-g:Math.max(f,w+g),p=v<=c?b/2:p>g?g:Math.max(p,b-g),Math.abs(h-u)<.05*h?this._setImageSize():(this.$image.css({width:Math.round(u),height:Math.round(d),left:Math.round(f),top:Math.round(p)}),Ht({w:Math.round(m),h:Math.round(v)},{w:l,h:c},this.$stage)),Ct.extend(this.imageData,{width:u,height:d,left:f,top:p})}rotate(t){this.rotationDegree=this.rotationDegree+t,this.rotationDegree/90%2==0?this.isRotated=!1:this.isRotated=!0,this.rotateTo(this.rotationDegree)}rotateTo(t){this.$image.css({transform:"rotate("+t+"deg)"}),this._setImageSize()}maximize(){this.$photoviewer.addClass(Ft+"-maximized"),this.$photoviewer.css({width:"auto",height:"auto",top:0,right:0,bottom:0,left:0}),this.isMaximized=!0}exitMaximize(){this.$photoviewer.removeClass(Ft+"-maximized"),this._setModalToCenter(),this.isMaximized=!1}toggleMaximize(){if(this.isMaximized)this.exitMaximize();else{let t=this.$photoviewer.width(),e=this.$photoviewer.height();Rt(this.$photoviewer)&&(t+=this._modalEdgeValue.horizontal,e+=this._modalEdgeValue.vertical),this.modalData={width:t,height:e,left:parseFloat(this.$photoviewer.css("left")),top:parseFloat(this.$photoviewer.css("top"))},this.maximize()}this._setImageSize(),this.$photoviewer[0].focus()}fullscreen(){var t;(t=this.$photoviewer[0]).requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen(),this.$photoviewer[0].focus()}resize(){this.isOpened&&(this.isMaximized?this._setImageSize():this._setModalSize())}_keydown(t){if(!this.options.keyboard)return;const e=t.keyCode||t.which||t.charCode,i=t.ctrlKey||t.metaKey,o=t.altKey;switch(e){case 37:this.jump(-1);break;case 39:this.jump(1);break;case 187:case 61:this.zoom(3*this.options.ratioThreshold,{x:this.$stage.width()/2,y:this.$stage.height()/2},t);break;case 189:case 173:this.zoom(3*-this.options.ratioThreshold,{x:this.$stage.width()/2,y:this.$stage.height()/2},t);break;case 48:i&&o&&this.zoomTo(1,{x:this.$stage.width()/2,y:this.$stage.height()/2},t);break;case 188:i&&(t.preventDefault(),this.rotate(-90));break;case 190:i&&this.rotate(90);break;case 81:this.close();break;case 88:o&&this.toggleMaximize();break;case 70:this.fullscreen()}}_addEvents(){this.$close.on(Bt+Nt,(()=>{this.close()})),this.$stage.on("wheel mousewheel DOMMouseScroll"+Nt,(t=>{this._wheel(t)})),this.$zoomIn.on(Bt+Nt,(()=>{this.zoom(3*this.options.ratioThreshold)})),this.$zoomOut.on(Bt+Nt,(()=>{this.zoom(3*-this.options.ratioThreshold)})),this.$actualSize.on(Bt+Nt,(()=>{this.zoomTo(1)})),this.$prev.on(Bt+Nt,(()=>{this.jump(-1)})),this.$next.on(Bt+Nt,(()=>{this.jump(1)})),this.$rotateLeft.on(Bt+Nt,(()=>{this.rotate(-90)})),this.$rotateRight.on(Bt+Nt,(()=>{this.rotate(90)})),this.$maximize.on(Bt+Nt,(()=>{this.toggleMaximize()})),this.$fullscreen.on(Bt+Nt,(()=>{this.fullscreen()})),this.$photoviewer.on("keydown"+Nt,(t=>{this._keydown(t)})),Vt.on(kt+Nt,function(t,e){let i=null;return function(){const e=this,o=arguments;clearTimeout(i),i=setTimeout((function(){t.apply(e,o)}),500)}}((()=>this.resize())))}_addCustomButtonEvents(){for(const t in this.options.customButtons)this.$photoviewer.find(Ut+"-button-"+t).on(Bt+Nt,(e=>{this.options.customButtons[t].click.apply(this,[this,e])}))}_triggerHook(t,e){this.options.callbacks[t]&&this.options.callbacks[t].apply(this,Ct.isArray(e)?e:[e])}}Ct.extend(qt.prototype,{draggable:function(t,e,i){let o=0,n=0,s=0,a=0;const r=e=>{if((e=e||window.event).preventDefault(),!Wt.isMoving&&!Wt.isResizing&&!this.isMaximized){const i="touchmove"===e.type?e.targetTouches[0].pageX:e.clientX,r="touchmove"===e.type?e.targetTouches[0].pageY:e.clientY,h=i-o,l=r-n;t.css({left:h+s,top:l+a})}},h=()=>{Pt.off(St+Nt,r).off(It+Nt,h)};Ct(e).on(jt+Nt,(e=>{if(e=e||window.event,t[0].focus(),Ct(e.target).closest(i).length)return!0;this.options.multiInstances&&t.css("z-index",++Wt.zIndex),o="touchstart"===e.type?e.targetTouches[0].pageX:e.clientX,n="touchstart"===e.type?e.targetTouches[0].pageY:e.clientY,s=parseFloat(t.css("left")),a=parseFloat(t.css("top")),t.css({left:s,top:a,right:"",bottom:""}),Pt.on(St+Nt,r).on(It+Nt,h)}))}},{movable:function(t,e){let i=0,o=0,n=0,s=0,a=0,r=0,h=0;const l=t=>{(t=t||window.event).preventDefault();const l="touchmove"===t.type?t.targetTouches[0].pageX:t.clientX,c="touchmove"===t.type?t.targetTouches[0].pageY:t.clientY,u=l-i,d=c-o;let f=u+n,p=d+s;r>0?d+s>h?p=h:d+s<-r+h&&(p=-r+h):p=s,a>0?u+n>-h?f=-h:u+n<-a-h&&(f=-a-h):f=n,e.css({left:f,top:p}),Ct.extend(this.imageData,{left:f,top:p})},c=()=>{Pt.off(St+Nt,l).off(It+Nt,c),Wt.isMoving=!1,Ct(Yt).removeClass("is-grabbing")};t.on(jt+Nt,(u=>{(u=u||window.event).preventDefault();const d=e.width(),f=e.height(),p=t.width(),g=t.height();i="touchstart"===u.type?u.targetTouches[0].pageX:u.clientX,o="touchstart"===u.type?u.targetTouches[0].pageY:u.clientY,h=this.isRotated?(d-f)/2:0,a=this.isRotated?f-p:d-p,r=this.isRotated?d-g:f-g,Wt.isMoving=a>0||r>0,n=e.position().left-h,s=e.position().top+h,t.hasClass("is-grab")&&Ct(Yt).addClass("is-grabbing"),Pt.on(St+Nt,l).on(It+Nt,c)}))}},{resizable:function(t,e,i,o){const n=Ct(`<div class="${Ft}-resizable-handle ${Ft}-resizable-handle-e"></div>`),s=Ct(`<div class="${Ft}-resizable-handle ${Ft}-resizable-handle-w"></div>`),a=Ct(`<div class="${Ft}-resizable-handle ${Ft}-resizable-handle-s"></div>`),r=Ct(`<div class="${Ft}-resizable-handle ${Ft}-resizable-handle-n"></div>`),h=Ct(`<div class="${Ft}-resizable-handle ${Ft}-resizable-handle-se"></div>`),l=Ct(`<div class="${Ft}-resizable-handle ${Ft}-resizable-handle-sw"></div>`),c=Ct(`<div class="${Ft}-resizable-handle ${Ft}-resizable-handle-ne"></div>`),u=Ct(`<div class="${Ft}-resizable-handle ${Ft}-resizable-handle-nw"></div>`),d={e:n,s:a,se:h,n:r,w:s,nw:u,ne:c,sw:l};t.append(n,s,a,r,h,l,c,u);let f=0,p=0,g={w:0,h:0,x:0,y:0},m={w:0,h:0,x:0,y:0},v={w:0,h:0,x:0,y:0},w=0,b=0,y=0,x="";const{modalWidth:$,modalHeight:z}=o,M=(o,n)=>{(n=n||window.event).preventDefault(),Wt.isResizing=!0,f="touchstart"===n.type?n.targetTouches[0].pageX:n.clientX,p="touchstart"===n.type?n.targetTouches[0].pageY:n.clientY,g={w:t.width()+(Rt(t)?this._modalEdgeValue.horizontal:0),h:t.height()+(Rt(t)?this._modalEdgeValue.vertical:0),x:t.position().left,y:t.position().top},m={w:e.width(),h:e.height(),x:e.position().left,y:e.position().top},v={w:i.width(),h:i.height(),x:i.position().left,y:i.position().top},w=this.isRotated?(v.w-v.h)/2:0,b=this.isRotated?v.h:v.w,y=this.isRotated?v.w:v.h,x=o,Ct(Xt).css("cursor",o+"-resize"),Pt.on(St+Nt,T).on(It+Nt,C)},T=e=>{if((e=e||window.event).preventDefault(),!this.isMaximized){const o="touchmove"===e.type?e.targetTouches[0].pageX:e.clientX,n="touchmove"===e.type?e.targetTouches[0].pageY:e.clientY,s=o-f,a=n-p,r=((t,e,i)=>{const o=-e+g.w>$?e+g.x:g.x+g.w-$,n=-i+g.h>z?i+g.y:g.y+g.h-z;return{e:{width:Math.max(e+g.w,$)},s:{height:Math.max(i+g.h,z)},se:{width:Math.max(e+g.w,$),height:Math.max(i+g.h,z)},w:{width:Math.max(-e+g.w,$),left:o},n:{height:Math.max(-i+g.h,z),top:n},nw:{width:Math.max(-e+g.w,$),height:Math.max(-i+g.h,z),top:n,left:o},ne:{width:Math.max(e+g.w,$),height:Math.max(-i+g.h,z),top:n},sw:{width:Math.max(-e+g.w,$),height:Math.max(i+g.h,z),left:o}}[t]})(x,s,a);t.css(r);const h=((t,e,o)=>{const n=e+g.w>$?m.w-b+e-w:$-(g.w-m.w)-b-w,s=o+g.h>z?m.h-y+o+w:z-(g.h-m.h)-y+w,a=-e+g.w>$?m.w-b-e-w:$-(g.w-m.w)-b-w,r=-o+g.h>z?m.h-y-o+w:z-(g.h-m.h)-y+w,h=i.position().left,l=i.position().top,c=(n>0?h:Math.min(h,0))-w,u=(s>0?l:Math.min(l,0))+w,d=(a>0?h:Math.min(h,0))-w,f=(r>0?l:Math.min(l,0))+w;return{e:{left:n>=-w?(n-w)/2:Math.max(c,n)},s:{top:s>=w?(s+w)/2:Math.max(u,s)},se:{top:s>=w?(s+w)/2:Math.max(u,s),left:n>=-w?(n-w)/2:Math.max(c,n)},w:{left:a>=-w?(a-w)/2:Math.max(d,a)},n:{top:r>=w?(r+w)/2:Math.max(f,r)},nw:{top:r>=w?(r+w)/2:Math.max(f,r),left:a>=-w?(a-w)/2:Math.max(d,a)},ne:{top:r>=w?(r+w)/2:Math.max(f,r),left:n>=-w?(n-w)/2:Math.max(c,n)},sw:{top:s>=w?(s+w)/2:Math.max(u,s),left:a>=-w?(a-w)/2:Math.max(d,a)}}[t]})(x,s,a);i.css(h)}},C=()=>{Pt.off(St+Nt,T).off(It+Nt,C);const t=e.width(),i=e.height();Wt.isResizing&&Ht({w:b,h:y},{w:t,h:i},e),Wt.isResizing=!1,Ct(Xt).css("cursor","");const{originalWidth:o,originalHeight:n}=this.imageData,s=At(o,n,t,i,this.isRotated),a=o*s,r=n*s;Ct.extend(this.imageData,{initWidth:a,initHeight:r,initLeft:(t-a)/2,initTop:(i-r)/2})};Ct.each(d,(function(t,e){e.on(jt+Nt,(function(e){M(t,e)}))}))}})})()})();